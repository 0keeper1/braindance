name: test

on: [ push, pull_request ]

jobs:
  test:
    name: Run test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install compiler
        id: install_cc
        uses: rlalik/setup-cpp-compiler@master
        with:
          compiler: latest
      - uses: actions/setup-python@v4.8.0
      - name: Install meson
        run: pip install meson ninja
      - name: Run setup
        run: meson setup build
      - name: Run build
        run: meson compile -v -C build
      - name: Run test
        run: meson test -v -C build